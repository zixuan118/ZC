{"ast":null,"code":"var _jsxFileName = \"/Users/zixuanchen/zixuan/my-website/src/components/ChatZixuan.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { ratio } from 'fuzzball'; // 使用 fuzzball 的 ratio 函数\nimport { zixuanQA } from './ZixuanDatabase'; // 导入 zixuanQA 对象\nimport { useLocation } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Container = styled.div`\n    padding: 80px 20px;\n    text-align: center;\n    background: linear-gradient(135deg, #c3b6d8 0%, #e2dfe2 100%);\n    min-height: 100vh;\n`;\n_c = Container;\nconst ChatBox = styled.div`\n    width: 90%;\n    max-width: 800px;\n    margin: 20px auto;\n    background-color: white;\n    border-radius: 25px;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n    padding: 30px;\n    text-align: left;\n`;\n_c2 = ChatBox;\nconst Message = styled.div`\n    margin: 10px 0;\n    padding: 10px;\n    background-color: #f5f5f5;\n    border-radius: 15px;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n`;\n_c3 = Message;\nconst Input = styled.input`\n    width: calc(100% - 24px);\n    padding: 15px;\n    margin: 10px 0;\n    border: 1px solid #ccc;\n    border-radius: 25px;\n    font-size: 1.1em;\n`;\n_c4 = Input;\nconst Button = styled.button`\n    padding: 10px 20px;\n    background-color: #a992d4;\n    color: white;\n    border: none;\n    border-radius: 25px;\n    cursor: pointer;\n    font-size: 1em;\n    margin-top: 10px;\n`;\n_c5 = Button;\nconst TypingEffect = ({\n  message\n}) => {\n  _s();\n  const [displayedText, setDisplayedText] = useState('');\n  useEffect(() => {\n    let index = 0;\n    const interval = setInterval(() => {\n      setDisplayedText(prev => prev + message[index]);\n      index++;\n      if (index === message.length) {\n        clearInterval(interval);\n      }\n    }, 10);\n    return () => clearInterval(interval);\n  }, [message]);\n  return /*#__PURE__*/_jsxDEV(\"span\", {\n    children: displayedText\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 12\n  }, this);\n};\n\n// 模糊匹配函数，找到与用户输入最相似的问题\n_s(TypingEffect, \"PLbRMeWiJa2NBtcoy3qeXvmWyJg=\");\n_c6 = TypingEffect;\nconst findFuzzyMatch = input => {\n  let bestMatch = {\n    answer: \"抱歉，我找不到这个问题的答案。\",\n    score: 0\n  };\n\n  // 使用 Object.entries() 遍历 zixuanQA 对象的键值对\n  Object.entries(zixuanQA).forEach(([question, answer]) => {\n    const similarity = ratio(input, question); // 使用 fuzzball 的 ratio 函数计算相似度\n    if (similarity > bestMatch.score) {\n      bestMatch = {\n        answer,\n        score: similarity\n      };\n    }\n  });\n\n  // 设置相似度的阈值\n  return bestMatch.score >= 70 ? bestMatch.answer : \"抱歉，我找不到这个问题的答案。\";\n};\nconst ChatZixuan = () => {\n  _s2();\n  var _location$state;\n  const location = useLocation();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const query = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.query) || ''; // 获取输入内容\n\n  useEffect(() => {\n    if (query) {\n      const answer = findFuzzyMatch(query); // 使用模糊匹配查找相似问题\n      const initialMessages = [{\n        role: 'user',\n        content: query\n      }, {\n        role: 'zixuan',\n        content: answer\n      }];\n      setMessages(initialMessages);\n    }\n  }, [query]);\n  const handleInputChange = e => {\n    setInput(e.target.value);\n  };\n  const handleFormSubmit = e => {\n    e.preventDefault();\n    if (input.trim()) {\n      const userMessage = {\n        role: 'user',\n        content: input\n      };\n      const answer = findFuzzyMatch(input); // 使用模糊匹配查找相似问题\n      const assistantMessage = {\n        role: 'zixuan',\n        content: answer\n      };\n      setMessages(prevMessages => [...prevMessages, userMessage, assistantMessage]);\n      setInput('');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(ChatBox, {\n      children: [messages.map((msg, index) => /*#__PURE__*/_jsxDEV(Message, {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: msg.role === 'user' ? 'You: ' : 'Zixuan: '\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 25\n        }, this), msg.role === 'zixuan' ? /*#__PURE__*/_jsxDEV(TypingEffect, {\n          message: msg.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 29\n        }, this) : msg.content]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 21\n      }, this)), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleFormSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          type: \"text\",\n          value: input,\n          onChange: handleInputChange,\n          placeholder: \"Ask anything about Zixuan...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 9\n  }, this);\n};\n_s2(ChatZixuan, \"bItjSbRKDnEpHg+f20FXFZ8j+D0=\", false, function () {\n  return [useLocation];\n});\n_c7 = ChatZixuan;\nexport default ChatZixuan;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"ChatBox\");\n$RefreshReg$(_c3, \"Message\");\n$RefreshReg$(_c4, \"Input\");\n$RefreshReg$(_c5, \"Button\");\n$RefreshReg$(_c6, \"TypingEffect\");\n$RefreshReg$(_c7, \"ChatZixuan\");","map":{"version":3,"names":["React","useState","useEffect","styled","ratio","zixuanQA","useLocation","jsxDEV","_jsxDEV","Container","div","_c","ChatBox","_c2","Message","_c3","Input","input","_c4","Button","button","_c5","TypingEffect","message","_s","displayedText","setDisplayedText","index","interval","setInterval","prev","length","clearInterval","children","fileName","_jsxFileName","lineNumber","columnNumber","_c6","findFuzzyMatch","bestMatch","answer","score","Object","entries","forEach","question","similarity","ChatZixuan","_s2","_location$state","location","messages","setMessages","setInput","query","state","initialMessages","role","content","handleInputChange","e","target","value","handleFormSubmit","preventDefault","trim","userMessage","assistantMessage","prevMessages","map","msg","onSubmit","type","onChange","placeholder","_c7","$RefreshReg$"],"sources":["/Users/zixuanchen/zixuan/my-website/src/components/ChatZixuan.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { ratio } from 'fuzzball'; // 使用 fuzzball 的 ratio 函数\nimport { zixuanQA } from './ZixuanDatabase'; // 导入 zixuanQA 对象\nimport { useLocation } from 'react-router-dom';\n\nconst Container = styled.div`\n    padding: 80px 20px;\n    text-align: center;\n    background: linear-gradient(135deg, #c3b6d8 0%, #e2dfe2 100%);\n    min-height: 100vh;\n`;\n\nconst ChatBox = styled.div`\n    width: 90%;\n    max-width: 800px;\n    margin: 20px auto;\n    background-color: white;\n    border-radius: 25px;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n    padding: 30px;\n    text-align: left;\n`;\n\nconst Message = styled.div`\n    margin: 10px 0;\n    padding: 10px;\n    background-color: #f5f5f5;\n    border-radius: 15px;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n`;\n\nconst Input = styled.input`\n    width: calc(100% - 24px);\n    padding: 15px;\n    margin: 10px 0;\n    border: 1px solid #ccc;\n    border-radius: 25px;\n    font-size: 1.1em;\n`;\n\nconst Button = styled.button`\n    padding: 10px 20px;\n    background-color: #a992d4;\n    color: white;\n    border: none;\n    border-radius: 25px;\n    cursor: pointer;\n    font-size: 1em;\n    margin-top: 10px;\n`;\n\nconst TypingEffect = ({ message }) => {\n    const [displayedText, setDisplayedText] = useState('');\n\n    useEffect(() => {\n        let index = 0;\n        const interval = setInterval(() => {\n            setDisplayedText((prev) => prev + message[index]);\n            index++;\n            if (index === message.length) {\n                clearInterval(interval);\n            }\n        }, 10);\n\n        return () => clearInterval(interval);\n    }, [message]);\n\n    return <span>{displayedText}</span>;\n};\n\n// 模糊匹配函数，找到与用户输入最相似的问题\nconst findFuzzyMatch = (input) => {\n    let bestMatch = { answer: \"抱歉，我找不到这个问题的答案。\", score: 0 };\n\n    // 使用 Object.entries() 遍历 zixuanQA 对象的键值对\n    Object.entries(zixuanQA).forEach(([question, answer]) => {\n        const similarity = ratio(input, question); // 使用 fuzzball 的 ratio 函数计算相似度\n        if (similarity > bestMatch.score) {\n            bestMatch = { answer, score: similarity };\n        }\n    });\n\n    // 设置相似度的阈值\n    return bestMatch.score >= 70 ? bestMatch.answer : \"抱歉，我找不到这个问题的答案。\";\n};\n\nconst ChatZixuan = () => {\n    const location = useLocation();\n    const [messages, setMessages] = useState([]);\n    const [input, setInput] = useState('');\n    const query = location.state?.query || ''; // 获取输入内容\n\n    useEffect(() => {\n        if (query) {\n            const answer = findFuzzyMatch(query); // 使用模糊匹配查找相似问题\n            const initialMessages = [\n                { role: 'user', content: query },\n                { role: 'zixuan', content: answer },\n            ];\n            setMessages(initialMessages);\n        }\n    }, [query]);\n\n    const handleInputChange = (e) => {\n        setInput(e.target.value);\n    };\n\n    const handleFormSubmit = (e) => {\n        e.preventDefault();\n        if (input.trim()) {\n            const userMessage = { role: 'user', content: input };\n            const answer = findFuzzyMatch(input); // 使用模糊匹配查找相似问题\n            const assistantMessage = { role: 'zixuan', content: answer };\n\n            setMessages((prevMessages) => [...prevMessages, userMessage, assistantMessage]);\n            setInput('');\n        }\n    };\n\n    return (\n        <Container>\n            <ChatBox>\n                {messages.map((msg, index) => (\n                    <Message key={index}>\n                        <strong>{msg.role === 'user' ? 'You: ' : 'Zixuan: '}</strong>\n                        {msg.role === 'zixuan' ? (\n                            <TypingEffect message={msg.content} />\n                        ) : (\n                            msg.content\n                        )}\n                    </Message>\n                ))}\n                <form onSubmit={handleFormSubmit}>\n                    <Input\n                        type=\"text\"\n                        value={input}\n                        onChange={handleInputChange}\n                        placeholder=\"Ask anything about Zixuan...\"\n                    />\n                    <Button type=\"submit\">Send</Button>\n                </form>\n            </ChatBox>\n        </Container>\n    );\n};\n\nexport default ChatZixuan;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}