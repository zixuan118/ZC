{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/zixuanchen/zixuan/my-website/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import React,{useState,useEffect}from'react';import styled from'styled-components';import{useLocation}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    padding: 80px 20px;\\n    text-align: center;\\n    background: linear-gradient(135deg, #c3b6d8 0%, #e2dfe2 100%);\\n    min-height: 100vh;\\n\"])));const ChatBox=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    width: 90%;\\n    max-width: 800px; // \\u8C03\\u6574\\u6700\\u5927\\u5BBD\\u5EA6\\u4EE5\\u9002\\u5E94\\u66F4\\u5927\\u5C4F\\u5E55\\n    margin: 20px auto;\\n    background-color: white;\\n    border-radius: 25px; // \\u8C03\\u6574\\u8FB9\\u6846\\u5706\\u89D2\\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); // \\u6DFB\\u52A0\\u9634\\u5F71\\n    padding: 30px; // \\u589E\\u52A0\\u5185\\u8FB9\\u8DDD\\n    text-align: left;\\n\"])));const Message=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    margin: 10px 0;\\n    padding: 10px;\\n    background-color: #f5f5f5;\\n    border-radius: 15px;\\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\n\"])));const Input=styled.input(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n    width: calc(100% - 24px);\\n    padding: 15px; // \\u8C03\\u6574\\u5185\\u8FB9\\u8DDD\\n    margin: 10px 0;\\n    border: 1px solid #ccc;\\n    border-radius: 25px; // \\u8C03\\u6574\\u8FB9\\u6846\\u5706\\u89D2\\n    background-color: #fff; // \\u4FDD\\u6301\\u80CC\\u666F\\u8272\\u4E00\\u81F4\\n    font-size: 1.1em; // \\u8C03\\u6574\\u5B57\\u4F53\\u5927\\u5C0F\\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\n\"])));const Button=styled.button(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n    padding: 10px 20px; // \\u8C03\\u6574\\u6309\\u94AE\\u5927\\u5C0F\\n    background-color: #a992d4; // \\u4FDD\\u6301\\u4E00\\u81F4\\u7684\\u80CC\\u666F\\u8272\\n    color: white;\\n    border: none;\\n    border-radius: 25px; // \\u8C03\\u6574\\u8FB9\\u6846\\u5706\\u89D2\\n    cursor: pointer;\\n    font-size: 1em;\\n    transition: background-color 0.3s, transform 0.3s;\\n\\n    &:hover {\\n        background-color: #9171ad;\\n        transform: scale(1.05); // \\u6DFB\\u52A0\\u60AC\\u505C\\u65F6\\u7684\\u7F29\\u653E\\u6548\\u679C\\n    }\\n\"])));const TypingEffect=_ref=>{let{message}=_ref;const[displayedText,setDisplayedText]=useState('');useEffect(()=>{let index=0;const interval=setInterval(()=>{setDisplayedText(prev=>prev+message[index]);index++;if(index===message.length){clearInterval(interval);}},20);return()=>clearInterval(interval);},[message]);return/*#__PURE__*/_jsx(\"span\",{children:displayedText});};const ChatComponent=()=>{const location=useLocation();const[messages,setMessages]=useState([]);const[input,setInput]=useState('');useEffect(()=>{var _location$state;if((_location$state=location.state)!==null&&_location$state!==void 0&&_location$state.initialQuery){const initialMessages=[{role:'user',content:location.state.initialQuery}];setMessages(initialMessages);handleApiRequest(initialMessages);}},[location.state]);const handleInputChange=e=>{setInput(e.target.value);};const handleFormSubmit=async e=>{e.preventDefault();const newMessages=[...messages,{role:'user',content:input}];setMessages(newMessages);handleApiRequest(newMessages);setInput('');};const handleApiRequest=async currentMessages=>{try{const res=await fetch('http://localhost:5002/api/ask',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({messages:currentMessages})});const data=await res.json();const updatedMessages=[...currentMessages,{role:'assistant',content:data.response}];setMessages(updatedMessages);}catch(error){console.error('Fetch error:',error.message);}};return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(ChatBox,{children:[messages.map((msg,index)=>/*#__PURE__*/_jsxs(Message,{children:[/*#__PURE__*/_jsx(\"strong\",{children:msg.role==='user'?'You: ':'ZX: '}),msg.role==='assistant'?/*#__PURE__*/_jsx(TypingEffect,{message:msg.content}):msg.content]},index)),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleFormSubmit,children:[/*#__PURE__*/_jsx(Input,{type:\"text\",value:input,onChange:handleInputChange,placeholder:\"Type your message...\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Send\"})]})]})});};export default ChatComponent;","map":{"version":3,"names":["React","useState","useEffect","styled","useLocation","jsx","_jsx","jsxs","_jsxs","Container","div","_templateObject","_taggedTemplateLiteral","ChatBox","_templateObject2","Message","_templateObject3","Input","input","_templateObject4","Button","button","_templateObject5","TypingEffect","_ref","message","displayedText","setDisplayedText","index","interval","setInterval","prev","length","clearInterval","children","ChatComponent","location","messages","setMessages","setInput","_location$state","state","initialQuery","initialMessages","role","content","handleApiRequest","handleInputChange","e","target","value","handleFormSubmit","preventDefault","newMessages","currentMessages","res","fetch","method","headers","body","JSON","stringify","data","json","updatedMessages","response","error","console","map","msg","onSubmit","type","onChange","placeholder"],"sources":["/Users/zixuanchen/zixuan/my-website/src/components/ChatComponent.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useLocation } from 'react-router-dom';\n\nconst Container = styled.div`\n    padding: 80px 20px;\n    text-align: center;\n    background: linear-gradient(135deg, #c3b6d8 0%, #e2dfe2 100%);\n    min-height: 100vh;\n`;\n\nconst ChatBox = styled.div`\n    width: 90%;\n    max-width: 800px; // 调整最大宽度以适应更大屏幕\n    margin: 20px auto;\n    background-color: white;\n    border-radius: 25px; // 调整边框圆角\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); // 添加阴影\n    padding: 30px; // 增加内边距\n    text-align: left;\n`;\n\nconst Message = styled.div`\n    margin: 10px 0;\n    padding: 10px;\n    background-color: #f5f5f5;\n    border-radius: 15px;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n`;\n\nconst Input = styled.input`\n    width: calc(100% - 24px);\n    padding: 15px; // 调整内边距\n    margin: 10px 0;\n    border: 1px solid #ccc;\n    border-radius: 25px; // 调整边框圆角\n    background-color: #fff; // 保持背景色一致\n    font-size: 1.1em; // 调整字体大小\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n`;\n\nconst Button = styled.button`\n    padding: 10px 20px; // 调整按钮大小\n    background-color: #a992d4; // 保持一致的背景色\n    color: white;\n    border: none;\n    border-radius: 25px; // 调整边框圆角\n    cursor: pointer;\n    font-size: 1em;\n    transition: background-color 0.3s, transform 0.3s;\n\n    &:hover {\n        background-color: #9171ad;\n        transform: scale(1.05); // 添加悬停时的缩放效果\n    }\n`;\n\nconst TypingEffect = ({ message }) => {\n    const [displayedText, setDisplayedText] = useState('');\n\n    useEffect(() => {\n        let index = 0;\n        const interval = setInterval(() => {\n            setDisplayedText((prev) => prev + message[index]);\n            index++;\n            if (index === message.length) {\n                clearInterval(interval);\n            }\n        }, 20);\n\n        return () => clearInterval(interval);\n    }, [message]);\n\n    return <span>{displayedText}</span>;\n};\n\nconst ChatComponent = () => {\n    const location = useLocation();\n    const [messages, setMessages] = useState([]);\n    const [input, setInput] = useState('');\n\n    useEffect(() => {\n        if (location.state?.initialQuery) {\n            const initialMessages = [{ role: 'user', content: location.state.initialQuery }];\n            setMessages(initialMessages);\n            handleApiRequest(initialMessages);\n        }\n    }, [location.state]);\n\n    const handleInputChange = (e) => {\n        setInput(e.target.value);\n    };\n\n    const handleFormSubmit = async (e) => {\n        e.preventDefault();\n        const newMessages = [...messages, { role: 'user', content: input }];\n        setMessages(newMessages);\n        handleApiRequest(newMessages);\n        setInput('');\n    };\n\n    const handleApiRequest = async (currentMessages) => {\n        try {\n            const res = await fetch('http://localhost:5002/api/ask', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({ messages: currentMessages }),\n            });\n            const data = await res.json();\n            const updatedMessages = [...currentMessages, { role: 'assistant', content: data.response }];\n            setMessages(updatedMessages);\n        } catch (error) {\n            console.error('Fetch error:', error.message);\n        }\n    };\n\n    return (\n        <Container>\n            <ChatBox>\n                {messages.map((msg, index) => (\n                    <Message key={index}>\n                        <strong>{msg.role === 'user' ? 'You: ' : 'ZX: '}</strong>\n                        {msg.role === 'assistant' ? <TypingEffect message={msg.content} /> : msg.content}\n                    </Message>\n                ))}\n                <form onSubmit={handleFormSubmit}>\n                    <Input\n                        type=\"text\"\n                        value={input}\n                        onChange={handleInputChange}\n                        placeholder=\"Type your message...\"\n                    />\n                    <Button type=\"submit\">Send</Button>\n                </form>\n            </ChatBox>\n        </Container>\n    );\n};\n\nexport default ChatComponent;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}