{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/zixuanchen/zixuan/my-website/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import React,{useState,useEffect}from'react';import styled from'styled-components';import{ratio}from'fuzzball';// 使用 fuzzball 的 ratio 函数\nimport{zixuanQA}from'./ZixuanDatabase';// 导入 zixuanQA 对象\nimport{useLocation}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    padding: 80px 20px;\\n    text-align: center;\\n    background: linear-gradient(135deg, #c3b6d8 0%, #e2dfe2 100%);\\n    min-height: 100vh;\\n\"])));const ChatBox=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n    width: 90%;\\n    max-width: 800px;\\n    margin: 20px auto;\\n    background-color: white;\\n    border-radius: 25px;\\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\\n    padding: 30px;\\n    text-align: left;\\n\"])));const Message=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    margin: 10px 0;\\n    padding: 10px;\\n    background-color: #f5f5f5;\\n    border-radius: 15px;\\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\n\"])));const Input=styled.input(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n    width: calc(100% - 24px);\\n    padding: 15px;\\n    margin: 10px 0;\\n    border: 1px solid #ccc;\\n    border-radius: 25px;\\n    font-size: 1.1em;\\n\"])));const Button=styled.button(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n    padding: 10px 20px;\\n    background-color: #a992d4;\\n    color: white;\\n    border: none;\\n    border-radius: 25px;\\n    cursor: pointer;\\n    font-size: 1em;\\n    margin-top: 10px;\\n\"])));const TypingEffect=_ref=>{let{message}=_ref;const[displayedText,setDisplayedText]=useState('');useEffect(()=>{let index=0;const interval=setInterval(()=>{setDisplayedText(prev=>prev+message[index]);index++;if(index===message.length){clearInterval(interval);}},10);return()=>clearInterval(interval);},[message]);return/*#__PURE__*/_jsx(\"span\",{children:displayedText});};// 模糊匹配函数，找到与用户输入最相似的问题\nconst findFuzzyMatch=input=>{let bestMatch={answer:\"抱歉，我找不到这个问题的答案。\",score:0};// 使用 Object.entries() 遍历 zixuanQA 对象的键值对\nObject.entries(zixuanQA).forEach(_ref2=>{let[question,answer]=_ref2;const similarity=ratio(input,question);// 使用 fuzzball 的 ratio 函数计算相似度\nif(similarity>bestMatch.score){bestMatch={answer,score:similarity};}});// 设置相似度的阈值\nreturn bestMatch.score>=70?bestMatch.answer:\"抱歉，我找不到这个问题的答案。\";};const ChatZixuan=()=>{var _location$state;const location=useLocation();const[messages,setMessages]=useState([]);const[input,setInput]=useState('');const query=((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.query)||'';// 获取输入内容\nuseEffect(()=>{if(query){const answer=findFuzzyMatch(query);// 使用模糊匹配查找相似问题\nconst initialMessages=[{role:'user',content:query},{role:'zixuan',content:answer}];setMessages(initialMessages);}},[query]);const handleInputChange=e=>{setInput(e.target.value);};const handleFormSubmit=e=>{e.preventDefault();if(input.trim()){const userMessage={role:'user',content:input};const answer=findFuzzyMatch(input);// 使用模糊匹配查找相似问题\nconst assistantMessage={role:'zixuan',content:answer};setMessages(prevMessages=>[...prevMessages,userMessage,assistantMessage]);setInput('');}};return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(ChatBox,{children:[messages.map((msg,index)=>/*#__PURE__*/_jsxs(Message,{children:[/*#__PURE__*/_jsx(\"strong\",{children:msg.role==='user'?'You: ':'Zixuan: '}),msg.role==='zixuan'?/*#__PURE__*/_jsx(TypingEffect,{message:msg.content}):msg.content]},index)),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleFormSubmit,children:[/*#__PURE__*/_jsx(Input,{type:\"text\",value:input,onChange:handleInputChange,placeholder:\"Ask anything about Zixuan...\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Send\"})]})]})});};export default ChatZixuan;","map":{"version":3,"names":["React","useState","useEffect","styled","ratio","zixuanQA","useLocation","jsx","_jsx","jsxs","_jsxs","Container","div","_templateObject","_taggedTemplateLiteral","ChatBox","_templateObject2","Message","_templateObject3","Input","input","_templateObject4","Button","button","_templateObject5","TypingEffect","_ref","message","displayedText","setDisplayedText","index","interval","setInterval","prev","length","clearInterval","children","findFuzzyMatch","bestMatch","answer","score","Object","entries","forEach","_ref2","question","similarity","ChatZixuan","_location$state","location","messages","setMessages","setInput","query","state","initialMessages","role","content","handleInputChange","e","target","value","handleFormSubmit","preventDefault","trim","userMessage","assistantMessage","prevMessages","map","msg","onSubmit","type","onChange","placeholder"],"sources":["/Users/zixuanchen/zixuan/my-website/src/components/ChatZixuan.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { ratio } from 'fuzzball'; // 使用 fuzzball 的 ratio 函数\nimport { zixuanQA } from './ZixuanDatabase'; // 导入 zixuanQA 对象\nimport { useLocation } from 'react-router-dom';\n\nconst Container = styled.div`\n    padding: 80px 20px;\n    text-align: center;\n    background: linear-gradient(135deg, #c3b6d8 0%, #e2dfe2 100%);\n    min-height: 100vh;\n`;\n\nconst ChatBox = styled.div`\n    width: 90%;\n    max-width: 800px;\n    margin: 20px auto;\n    background-color: white;\n    border-radius: 25px;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n    padding: 30px;\n    text-align: left;\n`;\n\nconst Message = styled.div`\n    margin: 10px 0;\n    padding: 10px;\n    background-color: #f5f5f5;\n    border-radius: 15px;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n`;\n\nconst Input = styled.input`\n    width: calc(100% - 24px);\n    padding: 15px;\n    margin: 10px 0;\n    border: 1px solid #ccc;\n    border-radius: 25px;\n    font-size: 1.1em;\n`;\n\nconst Button = styled.button`\n    padding: 10px 20px;\n    background-color: #a992d4;\n    color: white;\n    border: none;\n    border-radius: 25px;\n    cursor: pointer;\n    font-size: 1em;\n    margin-top: 10px;\n`;\n\nconst TypingEffect = ({ message }) => {\n    const [displayedText, setDisplayedText] = useState('');\n\n    useEffect(() => {\n        let index = 0;\n        const interval = setInterval(() => {\n            setDisplayedText((prev) => prev + message[index]);\n            index++;\n            if (index === message.length) {\n                clearInterval(interval);\n            }\n        }, 10);\n\n        return () => clearInterval(interval);\n    }, [message]);\n\n    return <span>{displayedText}</span>;\n};\n\n// 模糊匹配函数，找到与用户输入最相似的问题\nconst findFuzzyMatch = (input) => {\n    let bestMatch = { answer: \"抱歉，我找不到这个问题的答案。\", score: 0 };\n\n    // 使用 Object.entries() 遍历 zixuanQA 对象的键值对\n    Object.entries(zixuanQA).forEach(([question, answer]) => {\n        const similarity = ratio(input, question); // 使用 fuzzball 的 ratio 函数计算相似度\n        if (similarity > bestMatch.score) {\n            bestMatch = { answer, score: similarity };\n        }\n    });\n\n    // 设置相似度的阈值\n    return bestMatch.score >= 70 ? bestMatch.answer : \"抱歉，我找不到这个问题的答案。\";\n};\n\nconst ChatZixuan = () => {\n    const location = useLocation();\n    const [messages, setMessages] = useState([]);\n    const [input, setInput] = useState('');\n    const query = location.state?.query || ''; // 获取输入内容\n\n    useEffect(() => {\n        if (query) {\n            const answer = findFuzzyMatch(query); // 使用模糊匹配查找相似问题\n            const initialMessages = [\n                { role: 'user', content: query },\n                { role: 'zixuan', content: answer },\n            ];\n            setMessages(initialMessages);\n        }\n    }, [query]);\n\n    const handleInputChange = (e) => {\n        setInput(e.target.value);\n    };\n\n    const handleFormSubmit = (e) => {\n        e.preventDefault();\n        if (input.trim()) {\n            const userMessage = { role: 'user', content: input };\n            const answer = findFuzzyMatch(input); // 使用模糊匹配查找相似问题\n            const assistantMessage = { role: 'zixuan', content: answer };\n\n            setMessages((prevMessages) => [...prevMessages, userMessage, assistantMessage]);\n            setInput('');\n        }\n    };\n\n    return (\n        <Container>\n            <ChatBox>\n                {messages.map((msg, index) => (\n                    <Message key={index}>\n                        <strong>{msg.role === 'user' ? 'You: ' : 'Zixuan: '}</strong>\n                        {msg.role === 'zixuan' ? (\n                            <TypingEffect message={msg.content} />\n                        ) : (\n                            msg.content\n                        )}\n                    </Message>\n                ))}\n                <form onSubmit={handleFormSubmit}>\n                    <Input\n                        type=\"text\"\n                        value={input}\n                        onChange={handleInputChange}\n                        placeholder=\"Ask anything about Zixuan...\"\n                    />\n                    <Button type=\"submit\">Send</Button>\n                </form>\n            </ChatBox>\n        </Container>\n    );\n};\n\nexport default ChatZixuan;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}